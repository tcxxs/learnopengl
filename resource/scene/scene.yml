camera: eye
cameras:
  eye:
    fov: 45.0
    pos: [0.0, 1.0, 2.0]
    target: [0.0, 0.0, -1.0]
  light:
    fov: 45.0
    pos: [0.0, 1.0, -1.0]
    target: [0.0, -1.0, 1.0]
lights:
  - type: spot_shadow
    name: light_shadow
    pos: [0.2, 1.2, 0.7]
    dir: [-0.5, -1.0, -1.0]
  - type: dir_ambient
    dir: [0.0, -1.0, 1.0]
  # - type: point
  #   pos: [0.1, 0.6, 0.2]
  # - type: point1
  #   pos: [0.0, 0.05, 1.0]
  # - type: point2
  #   pos: [1.5, 0.05, 1.0]
  # - type: point3
  #   pos: [3.0, 0.05, 1.0]
models:
  - type: sky
    pos: [0.0, 0.0, 0.0]
    scale: 50.0
  - type: land
    pos: [0.0, -0.1, 0.0]
    scale: 5.0
    material: phong_shadow
  - type: cube
    pos: [0.5, 0.0, 0.0]
    scale: 0.5
  - type: lamp
    name: light_shadow
    pos: [0.2, 1.2, 0.7]
    dir: [0.5, 1.0, -1.0]
    scale: 0.01
  - type: sun
    pos: [0.1, 0.6, 0.2]
    scale: 0.01
  - type: lamp
    pos: [0.0, 1.0, -1.0]
    dir: [0.0, -1.0, 1.0]
    scale: 0.01
  - type: sun
    pos: [0.0, 0.05, 1.0]
    scale: 0.01
  - type: sun
    pos: [1.5, 0.05, 1.0]
    scale: 0.01
  - type: sun
    pos: [3.0, 0.05, 1.0]
    scale: 0.01
  - type: nanosuit
    name: nanosuit
    pos: [0.0, 0.0, 0.0]
    scale: 0.05
    material: phong
    materials:
      shadow: shadow
      debug: phong_debug
  - type: nanosuit
    material: phong_ins
    instance:
      - pos: [0.5, 0.0, 0.0]
        scale: 0.05
      - pos: [1.0, 0.0, 0.0]
        scale: 0.05
      - pos: [1.5, 0.0, 0.0]
        scale: 0.05
  - type: aircraft
    name: aircraft
    pos: [-0.3, 0.2, -0.5]
    scale: 0.1
    dir: [-1.0, -1.0, -1.0]
    material: phong_shadow
frames:
  scene: [texture, depst]
  shadow: [shadow]
pass:
  # - name: xxx         #可能会在model的materils中引用
  #   camera: xxx       #cameras中的名字
  #   states:           #状态控制
  #     clear: [color, depth, stencil]
  #     depth: [true, less]
  #   shaders:          
  #     xxx:            #shader名称
  #       yyy: zzz      #将uniform yyy，设置为zzz
  #       yyy: <-zzz    #zzz是一个input frame
  #       yyy: ->zzz    #zzz是一个output frame        
  #       ...
  #     ...
  #   posts:            #同shader
  #     ...
  #   out:              #输出frame
  ############ 正常场景
  # - name: scene
  #   states:
  #     clear: [color, depth, stencil]
  #     depth: [true, less]
  #   shaders:
  #     phong:
  #     phong_ins:
  #     color:
  #     reflect:
  # - name: sky
  #   states:
  #     depth: [true, lesseq]
  #   shaders:
  #     sky:
  ############ 简单后处理
  # - name: scene
  #   states:
  #     clear: [color, depth, stencil]
  #     depth: [true, less]
  #   shaders:
  #     phong:
  #     phong_ins:
  #     color:
  #     reflect:
  #   out: [[frame, out, scene]]
  # - name: post
  #   states:
  #     clear: [color, depth, stencil]
  #     depth: [true, less]
  #   posts:
  #     post:
  #       scene: [[frame, in, scene]]
  ############ lightmap
  - name: shadow
    camera: [[camera, light, light_shadow]]
    states:
      clear: [color, depth, stencil]
      depth: [true, less]
    shaders:
      shadow:
    out: [[frame, out, shadow]]
  - name: scene
    states:
      clear: [color, depth, stencil]
      depth: [true, less]
    shaders:
      phong:
      phong_ins:
      phong_shadow:
        shadow_map: [[frame, in, shadow]]
        shadow_vp: [[matvp, light, light_shadow]]
      color:
      reflect:
  - name: sky
    states:
      depth: [true, lesseq]
    shaders:
      sky:


  # - name: shadow
  #   camera: light
  #   shaders: [shadow]
  #   out:
  #     name: shadow
  #     attach: [shadow]
  #   states:
  #     clear: [depth]
  #     depth: [true, less]
  # - name: debug
  #   shaders: [phong_debug]
  #   post:
  #   in:
  #   out:
  #   states:
  # - name: sky
  #   shaders: [sky]
  #   post:
  #   in:
  #   out:
  #   states:
  #     depth: [true, lesseq]
  # - name: grey
  #   post: grey
  #   in: [draw]
  #   states:
  #     clear: [color, depth, stencil]
  #     depth: [false]
  # - name: show
  #   post: show
  #   in: [shadow]
  #   states:
  #     clear: [color, depth, stencil]
  #     depth: [false]